# @funboxteam/optimizt

<img align="right" width="192" height="192"
     alt="–ê–≤–∞—Ç–∞—Ä –û–ø—Ç–∏–º–∏–∑—Ç–∞: ¬´OK¬ª –∂–µ—Å—Ç —Å –∫–∞—Ä—Ç–∏–Ω–æ–π –ú–æ–Ω–æ–π –õ–∏–∑–æ–π –º–µ–∂–¥—É –ø–∞–ª—å—Ü–∞–º–∏"
     src="./images/logo.png">

[![npm](https://img.shields.io/npm/v/@funboxteam/optimizt.svg)](https://www.npmjs.com/package/@funboxteam/optimizt)

**Optimizt** ‚Äî —ç—Ç–æ –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞, –ø–æ–º–æ–≥–∞—é—â–∞—è –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.

–û–Ω–∞ —É–º–µ–µ—Ç —Å–∂–∏–º–∞—Ç—å PNG, JPEG, GIF –∏ SVG —Å –ø–æ—Ç–µ—Ä—è–º–∏ –∏ –±–µ–∑, –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å AVIF –∏ WebP-–≤–µ—Ä—Å–∏–∏ –¥–ª—è —Ä–∞—Å—Ç—Ä–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## –ú–æ—Ç–∏–≤–∞—Ü–∏—è

–ë—É–¥—É—á–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ—Ä–∞–º–∏ –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–º–Ω–∏—Ç—å –æ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö: —Å–∂–∏–º–∞—Ç—å PNG –∏ JPEG, —É–¥–∞–ª—è—Ç—å –ª–∏—à–Ω–∏–µ –∫—É—Å–∫–∏ –∏–∑ SVG,
—Å–æ–∑–¥–∞–≤–∞—Ç—å AVIF –∏ WebP –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ. –û–¥–Ω–∞–∂–¥—ã –º—ã —É—Å—Ç–∞–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—É—á—É —Ä–∞–∑–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç –¥–ª—è –≤—Å–µ–≥–æ
—ç—Ç–æ–≥–æ –∏ —Å–æ–∑–¥–∞–ª–∏ –æ–¥–Ω—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –≤—Å—ë, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:

```sh
npm i -g @funboxteam/optimizt
```

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å!

```sh
optimizt path/to/picture.jpg
```

## –§–ª–∞–≥–∏

- `--avif` ‚Äî —Å–æ–∑–¥–∞—Ç—å AVIF-–≤–µ—Ä—Å–∏–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞ –Ω–µ —Å–∂–∏–º–∞—Ç—å –∏—Ö.
- `--webp` ‚Äî —Å–æ–∑–¥–∞—Ç—å WebP-–≤–µ—Ä—Å–∏–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞ –Ω–µ —Å–∂–∏–º–∞—Ç—å –∏—Ö.
- `-f, --force` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å AVIF –∏ WebP-–≤–µ—Ä—Å–∏–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ä–∞–∑–º–µ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ.
- `-l, --lossless` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑ –ø–æ—Ç–µ—Ä—å, –∞ –Ω–µ —Å –ø–æ—Ç–µ—Ä—è–º–∏.
- `-v, --verbose` ‚Äî –≤—ã–≤–æ–¥–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã).
- `-c, --config` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≤–º–µ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- `-o, --output` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
- `-V, --version` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏—é —É—Ç–∏–ª–∏—Ç—ã.
- `-h, --help` ‚Äî –≤—ã–≤–µ—Å—Ç–∏ —Å–ø—Ä–∞–≤–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

## –ü—Ä–∏–º–µ—Ä—ã

```bash
# –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–¥–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏
optimizt path/to/picture.jpg

# –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –ø–æ—Ç–µ—Ä—å
optimizt --lossless path/to/picture.jpg path/to/another/picture.png

# —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ AVIF-–≤–µ—Ä—Å–∏–π –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
optimizt --avif path/to/directory

# —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ WebP-–≤–µ—Ä—Å–∏–π –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
optimizt --webp path/to/directory

# —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è JPEG –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
find . -iname \*.jpg -exec optimizt {} +
```

## –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Lossy –∏ Lossless

### Lossy (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏—Ç–æ–≥–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º —Å–∂–∞—Ç–∏—è –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
–≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π.

### Lossless (–∑–∞–ø—É—Å–∫ —Å —Ñ–ª–∞–≥–æ–º --lossless)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ AVIF –∏ WebP-–≤–µ—Ä—Å–∏–π –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ PNG, JPEG –∏ GIF –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —É–∫–ª–æ–Ω–æ–º –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —É—â–µ—Ä–± –∏—Ç–æ–≥–æ–≤–æ–º—É —Ä–∞–∑–º–µ—Ä—É —Ñ–∞–π–ª–∞.

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ SVG-—Ñ–∞–π–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ Lossy –∏ Lossless —Ä–µ–∂–∏–º–∞—Ö ‚Äî –∏–¥–µ–Ω—Ç–∏—á–Ω—ã.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û–±—Ä–∞–±–æ—Ç–∫–∞ [JPEG](https://sharp.pixelplumbing.com/api-output#jpeg), [PNG](https://sharp.pixelplumbing.com/api-output#png),
[WebP](https://sharp.pixelplumbing.com/api-output#webp) –∏ [AVIF](https://sharp.pixelplumbing.com/api-output#avif)
–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [sharp](https://github.com/lovell/sharp), –∞ SVG –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç—ã 
[svgo](https://github.com/svg/svgo).

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ GIF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [gifsicle](https://github.com/kohler/gifsicle), –∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ WebP ‚Äî 
[gif2webp](https://developers.google.com/speed/webp/docs/gif2webp).

> üí° –í —Ä–µ–∂–∏–º–µ Lossless –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ JPEG –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç–Ω–∫–æ–¥–µ—Ä [Guetzli](https://github.com/google/guetzli), –∫–æ—Ç–æ—Ä—ã–π
> –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏ –∏ –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ö–æ—Ä–æ—à–µ–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
> –ù–æ, –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤ –≤–∏–¥—É, —á—Ç–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ —Ä–∞–∑–º–µ—Ä –º–æ–∂–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è –∑–∞ —Å—á—ë—Ç –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ
> –∫–∞—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ [.optimiztrc.js](./.optimiztrc.js), —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö 
–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –∏—Ö –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. 

–î–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ª—é–±–æ–≥–æ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `false`.

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å —Ñ–ª–∞–≥–æ–º `--config path/to/.optimiztrc.js` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

–ü—Ä–∏ –æ–±—ã—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ, –±–µ–∑ —Ñ–ª–∞–≥–∞ `--config`, –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–∞ `.optimiztrc.js` –Ω–∞—á–∏–Ω–∞—è
—Å —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –¥–æ –∫–æ—Ä–Ω—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç–æ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### ¬´External Tool¬ª –≤ WebStorm, PhpStorm –∏ –ø—Ä.

<details>

<summary>–î–µ—Ç–∞–ª–∏</summary>

#### –î–æ–±–∞–≤—å—Ç–µ ¬´External Tool¬ª

–û—Ç–∫—Ä–æ–π—Ç–µ _Preferences ‚Üí Tools ‚Üí External Tools_ –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

- Program: –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ (–æ–±—ã—á–Ω–æ –ø—Ä–æ—Å—Ç–æ `optimizt`)
- Arguments: –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≤–∞–º, –Ω–æ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `$FilePath$` —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞—Ç—å –û–ø—Ç–∏–º–∏–∑—Ç—É –ø—É—Ç—å –¥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞
- Working Directory: `$ContentRoot$`
- Synchronize files after execution: ‚úîÔ∏è

–û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –≤–∞—à–µ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä:

![](images/ws_external-tools.png)

–ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –≤—ã—à–µ, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ¬´–≤–Ω–µ—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤¬ª —Å —Ä–∞–∑–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.

#### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–í—ã–∑–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ —Ñ–∞–π–ª–µ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ:

<img src="images/ws_menu.png" width="55%">

#### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

–î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –≤ _Preferences ‚Üí Keymap ‚Üí External Tools_:

![](images/ws_keymap.png)

</details>

### ¬´Tasks¬ª –≤ Visual Studio Code

<details>

<summary>–î–µ—Ç–∞–ª–∏</summary>

#### –î–æ–±–∞–≤—å—Ç–µ Task

–° –ø–æ–º–æ—â—å—é _Command Palette_ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç `>Tasks: Open User Tasks`.

–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è —Ñ–∞–π–ª–µ, –≤ –º–∞—Å—Å–∏–≤ `tasks` –¥–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```javascript
{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "optimizt: Optimize Image",
      "type": "shell",
      "command": "optimizt",
      "args": [
        "--verbose",
        {
          "value": "${file}",
          "quoting": "strong"
        }
      ],
      "presentation": {
        "echo": false,
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "optimizt: Optimize Image (lossless)",
      "type": "shell",
      "command": "optimizt",
      "args": [
        "--lossless",
        "--verbose",
        {
          "value": "${file}",
          "quoting": "strong"
        }
      ],
      "presentation": {
        "echo": false,
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "optimizt: Create WebP",
      "type": "shell",
      "command": "optimizt",
      "args": [
        "--webp",
        "--verbose",
        {
          "value": "${file}",
          "quoting": "strong"
        }
      ],
      "presentation": {
        "echo": false,
        "showReuseMessage": false,
        "clear": true
      }
    },
    {
      "label": "optimizt: Create WebP (lossless)",
      "type": "shell",
      "command": "optimizt",
      "args": [
        "--webp",
        "--lossless",
        "--verbose",
        {
          "value": "${file}",
          "quoting": "strong"
        }
      ],
      "presentation": {
        "echo": false,
        "showReuseMessage": false,
        "clear": true
      }
    }
  ]
}
```

#### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –ø–æ–º–æ—â—å—é –û–ø—Ç–∏–º–∏–∑—Ç–∞, –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ.
2. –° –ø–æ–º–æ—â—å—é _Command Palette_ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç `>Tasks: Run Task`.
3. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é –∑–∞–¥–∞—á—É.

#### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

–î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä—è—á—É—é –∫–ª–∞–≤–∏—à—É –¥–ª—è –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞–≤ –ø—É–Ω–∫—Ç `>Preferences: Open Keyboard Shortcuts (JSON)` –≤ _Command Palette_.

–ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–æ—Ä—è—á–µ–π –∫–ª–∞–≤–∏—à–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á–∏ ¬´optimizt: Optimize Image (lossless)¬ª:

```javascript
// Place your key bindings in this file to override the defaults
[
  {
    "key": "ctrl+l",
    "command": "workbench.action.tasks.runTask",
    "args": "optimizt: Optimize Image (lossless)"
  }
]
```

</details>

### –ü–ª–∞–≥–∏–Ω –¥–ª—è Sublime Text 3

<details>

<summary>–î–µ—Ç–∞–ª–∏</summary>

–ü—É—Ç–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:

- macOS: `~/Library/Application Support/Sublime Text 3/Packages/User`
- Linux: `~/.config/sublime-text-3/Packages/User`
- Windows: `%APPDATA%\Sublime Text 3\Packages\User`

#### –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞–≥–∏–Ω

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `optimizt.py` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```python
import os
import sublime
import sublime_plugin

optimizt = "~/.nodenv/shims/optimizt"

class OptimiztCommand(sublime_plugin.WindowCommand):
  def run(self, paths=[], options=""):
    if len(paths) < 1:
      return

    safe_paths = ["\"" + i + "\"" for i in paths]
    shell_cmd = optimizt + " " + options + " " + " ".join(safe_paths)
    cwd = os.path.dirname(paths[0])

    self.window.run_command("exec", {
      "shell_cmd": shell_cmd,
      "working_dir": cwd
    })
```

–í –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `optimizt` –ø—Ä–æ–ø–∏—à–∏—Ç–µ –ø—É—Ç—å –¥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
`command -v optimizt` (–≤ *nix) –∏–ª–∏ `where optimizt` (–≤ Windows).

#### –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –ø–ª–∞–≥–∏–Ω –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é —Å–∞–π–¥–±–∞—Ä–∞

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Side Bar.sublime-menu` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```json
[
    {
        "caption": "Optimizt",
        "children": [
          {
              "caption": "Optimize Images",
              "command": "optimizt",
              "args": {
                "paths": [],
                "options": "--verbose"
              }
          },
          {
              "caption": "Optimize Images (lossless)",
              "command": "optimizt",
              "args": {
                "paths": [],
                "options": "--lossless --verbose"
              }
          },
          {
              "caption": "Create WebP",
              "command": "optimizt",
              "args": {
                "paths": [],
                "options": "--webp --verbose"
              }
          },
          {
              "caption": "Create WebP (lossless)",
              "command": "optimizt",
              "args": {
                "paths": [],
                "options": "--webp --lossless --verbose"
              }
          }
        ]
    }
]
```

#### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–í—ã–∑–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –Ω–∞ —Ñ–∞–π–ª–µ –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ:

<img src="images/st_sidebar_menu.png" width="55%">

</details>

### ¬´Workflow¬ª –¥–ª—è GitHub Actions

<details>

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `optimizt.yml` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `.github/workflows` –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ —Ñ–∞–π–ª `optimizt.yml`:

```yml
name: optimizt

on:
  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ "push" –¥–ª—è –≤–µ—Ç–∫–∏ "main", –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏
  # –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π JPEG –∏ PNG —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ–º–º–∏—Ç–µ.
  push:
    branches:
      - main
    paths:
      - "**.jpe?g"
      - "**.png"
  
  # –†–∞–∑—Ä–µ—à–∞–µ–º —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–∞–Ω–Ω–æ–≥–æ –≤–æ—Ä–∫—Ñ–ª–æ—É –∏–∑ —Ç–∞–±–∞ Actions
  workflow_dispatch:

jobs:
  convert:
    runs-on: ubuntu-latest

    steps:
      # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–∫–∏ EACCESS
      # –≤–æ –≤—Ä–µ–º—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
      - uses: actions/setup-node@v2
        with:
          node-version: 14

      - name: Install Optimizt
        run: npm install --global @funboxteam/optimizt

      - uses: actions/checkout@v2
        with:
          persist-credentials: false # –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞, –≤–º–µ—Å—Ç–æ GITHUB_TOKEN
          fetch-depth: 0 # –∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –∫–æ–º–º–∏—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥—Ä—É–∑–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π)

      - name: Run Optimizt
        run: optimizt --verbose --force --avif --webp .

      - name: Commit changes
        run: |
          git add -A
          git config --local user.email "actions@github.com"
          git config --local user.name "github-actions[bot]"
          git diff --quiet && git diff --staged --quiet \
            || git commit -am "Create WebP & AVIF versions"

      - name: Push changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ github.ref }}
```

–î–∞–Ω–Ω—ã–π –≤–æ—Ä–∫—Ñ–ª–æ—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ JPEG –∏ PNG —Ñ–∞–π–ª–æ–≤ –≤ –Ω–æ–≤—ã—Ö –∫–æ–º–º–∏—Ç–∞—Ö, –∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ç–∞–∫–æ–≤—ã—Ö –¥–æ–±–∞–≤–∏—Ç AVIF –∏ WebP
–≤–µ—Ä—Å–∏–∏ —Å –ø–æ–º–æ—â—å—é –Ω–æ–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞.

–ë–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [workflows](./workflows).

</details>

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### ¬´spawn guetzli ENOENT¬ª –∏ —Ç. –¥.

–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ç–æ–º, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø—Ü–∏—è
[ignore-scripts](https://docs.npmjs.com/cli/v6/using-npm/config#ignore-scripts).

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [#9](https://github.com/funbox/optimizt/issues/9).

### ¬´pkg-config: command not found¬ª, ¬´fatal error: 'png.h' file not found¬ª –∏ —Ç. –¥.

–ù–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –û–° –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã, –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.

–ü—Ä–∏–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ macOS —Å –ø–æ–º–æ—â—å—é [Homebrew](https://brew.sh/index_ru):

```bash
brew install pkg-config libpng
```

## Docker

### Pull –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

```bash
docker pull 343dev/optimizt
```

### Pull –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –≤–µ—Ä—Å–∏–∏

```bash
docker pull 343dev/optimizt:4.1.0
```

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å–æ–±—Ä–∞—Ç—å –î–æ–∫–µ—Ä –æ–±—Ä–∞–∑, –Ω—É–∂–Ω–æ:

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –Ω–µ–≥–æ.
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å `docker build -t funbox/optimizt .`.

–ò–õ–ò:

- –í—ã–ø–æ–ª–Ω–∏—Ç—å `docker build -t funbox/optimizt https://github.com/funbox/optimizt.git`, –Ω–æ –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤–≤–∏–¥—É, —á—Ç–æ —Ñ–∞–π–ª
  [.dockerignore](.dockerignore) –±—É–¥–µ—Ç [–ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω](https://github.com/docker/cli/issues/2827).

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏–µ WORKDIR —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–∞–∫ `/src`, –ø–æ—ç—Ç–æ–º—É –≤—Å–µ –ø—É—Ç–∏ –±—É–¥—É—Ç —Ä–∞–∑—Ä–µ—à–∞—Ç—å—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–µ—ë.

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
docker run -v $(pwd):/src funbox/optimizt --webp image.png
```

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ö–ª—ë–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –Ω–∞—Ä–∏—Å–æ–≤–∞–ª [–ò–≥–æ—Ä—å –ì–∞—Ä–∏–±–∞–ª—å–¥–∏](http://pandabanda.com/).

[![Sponsored by FunBox](https://funbox.ru/badges/sponsored_by_funbox_centered.svg)](https://funbox.ru)
